define(["jquery"],function(){
/*!
     * jQuery placeholder, fix for IE6,7,8,9
     */
;var b={_check:function(){return"placeholder" in document.createElement("input")},init:function(){!this._check()&&this.fix()},fix:function(){$(":input[placeholder]").map(function(){var g=$(this),f=g.attr("placeholder");g.wrap($("<div></div>").css({zoom:"1",margin:"none",border:"none",padding:"none",background:"none",position:"relative"}));var l=g.position(),j=g.outerHeight(true),k=g.css("padding-left");var i=$("<span></span>").text(f).css({position:"absolute",left:l.left,top:l.top,height:j,lineHeight:j+"px",paddingLeft:k,color:"#aaa"}).appendTo(g.parent());g.on("focusin focusout change keyup",function(){g.val()?i.hide():i.show()});i.click(function(){g.get(0).focus()});g.val()&&i.hide()})}};b.init();function e(){this.version="2.0";this.shade=[0.02,"#000"];this.closeIndexs={}}e.prototype.close=function(){if(!this.closeIndexs["_"+this.index]){this.closeIndexs["_"+this.index]=true;return layer.close(this.index)}};e.prototype.alert=function(f,g){this.close();return this.index=layer.alert(f,{end:g,scrollbar:false})};e.prototype.confirm=function(i,g,h){var f=this;return this.index=layer.confirm(i,{btn:["确认","取消"]},function(){typeof g==="function"&&g.call(this);f.close()},function(){typeof h==="function"&&g.call(this);f.close()})};e.prototype.success=function(g,f,h){this.close();return this.index=layer.msg(g,{icon:1,shade:this.shade,scrollbar:false,end:h,time:(f||2)*1000,shadeClose:true})};e.prototype.error=function(g,f,h){this.close();return this.index=layer.msg(g,{icon:2,shade:this.shade,scrollbar:false,time:(f||3)*1000,end:h,shadeClose:true})};e.prototype.tips=function(g,f,h){this.close();return this.index=layer.msg(g,{time:(f||3)*1000,shade:this.shade,end:h,shadeClose:true})};e.prototype.loading=function(f,g){this.close();return this.index=f?layer.msg(f,{icon:16,scrollbar:false,shade:this.shade,time:0,end:g}):layer.load(2,{time:0,scrollbar:false,shade:this.shade,end:g})};e.prototype.auto=function(g,h){var f=this;if(parseInt(g.code)===1){return f.success(g.msg,h,function(){if(g.data.jump){window.location.href=g.url}!!g.url?($.form.href(g.url)):$.form.reload();if(f.autoSuccessCloseIndexs&&f.autoSuccessCloseIndexs.length>0){for(var j in f.autoSuccessCloseIndexs){layer.close(f.autoSuccessCloseIndexs[j])}f.autoSuccessCloseIndexs=[]}})}f.error(g.msg,3,function(){!!g.url&&(window.location.href=g.url)})};e.prototype.addAutoSuccessCloseIndex=function(f){this.autoSuccessCloseIndexs=this.autoSuccessCloseIndexs||[];this.autoSuccessCloseIndexs.push(f)};$.msg=new e();function a(){this.version="2.0";this.errMsg="{status}服务器繁忙，请稍候再试！"}a.prototype.load=function(f,i,k,m,h,j,g){var n=this,l=0;(h!==false)&&(l=$.msg.loading(j));(typeof Pace==="object")&&Pace.restart();$.ajax({type:k||"GET",url:$.menu.parseUri(f),data:i||{},statusCode:{404:function(){$.msg.tips(n.errMsg.replace("{status}","E404 - "))},500:function(){$.msg.tips(n.errMsg.replace("{status}","E500 - "))}},error:function(o,q,p){$.msg.tips(n.errMsg.replace("{status}","E"+q+" - "))},success:function(o){$.msg.close(l);if(typeof m==="function"&&m.call(n,o)===false){return false}if(typeof(o)==="object"){return $.msg.auto(o,g)}n.show(o)}})};a.prototype.reInit=function(f){$.validate.listen.call(this),b.init();f.find("[required]").parent().prevAll("label").addClass("label-required")};a.prototype.open=function(g,h,j,i,f){this.load(g,h,"GET",function(k){if(typeof(k)==="object"){return $.msg.auto(k)}var m=$(".layer-main-container").html(k);l.call(this),setTimeout(l,500),setTimeout(l,1000);return(typeof j==="function")&&j.call(this);function l(){$.form.reInit(m)}},i,f)};a.prototype.href=function(f,g){window.location.href="#"+$.menu.parseUri(f,g)};a.prototype.modal=function(g,i,j,l,k,f,h){this.load(g,i,"GET",function(m){if(typeof(m)==="object"){return $.msg.auto(m)}layer.open({type:1,shadeClose:true,btn:false,area:h,content:m,title:j||"",success:function(p,n){$.msg.addAutoSuccessCloseIndex(n);var o=$(p);o.find("[data-close]").off("click").on("click",function(){if($(this).attr("data-confirm")){$.msg.confirm($(this).attr("data-confirm"),function(){layer.close(n)})}else{layer.close(n)}});$.form.reInit(o)}});return(typeof l==="function")&&l.call(this)},true,f)};a.prototype.show=function(f){var h=$(".layer-main-container").html(f);g.call(this),setTimeout(g,500),setTimeout(g,1000);function g(){$.form.reInit(h)}};a.prototype.iframe=function(f,g){return layer.open({title:g||"窗口",type:2,area:["80%","530px"],fix:true,maxmin:false,content:f})};a.prototype.close=function(){return $(this._modal).modal("hide")};a.prototype.reload=function(){window.onhashchange.call(this)};
/*!表单实例挂载*/
;$.form=new a();var d=function(){this.inputTag="input,textarea,select";this.checkEvent={change:true,blur:true,keyup:false}};d.prototype.getElementType=function(f){return(f.getAttribute("type")+"").replace(/\W+$/,"").toLowerCase()};d.prototype.trim=function(f){return f.replace(/(^\s*)|(\s*$)/g,"")};d.prototype.isVisible=function(f){return $(f).is(":visible")};d.prototype.hasProp=function(g,i,h){if(typeof i!=="string"){return false}var f=g.getAttribute(i);return(f!==h&&f!==null&&f!==false)};d.prototype.isEmpty=function(h,g){g=g||h.getAttribute("placeholder");var f=this.trim(h.value);return(f===""||f===g)};d.prototype.isRegex=function(s,p,k){var j=s.value,n=j;var r=this,o=this.getElementType(s);if(o!=="password"){n=this.trim(j);if(n!==j){if(s.tagName.toLowerCase()!=="textarea"){s.value=n}else{s.innerHTML=n}}}p=p||s.getAttribute("pattern");if(n===""||!p){return true}var m=this.hasProp(s,"multiple"),q=new RegExp(p,k||"i");if(m&&!/^number|range$/i.test(o)){var g=true;var f=n.split(",");for(var l in f){var h=r.trim(f[l]);if(g&&!q.test(h)){g=false}}return g}else{return q.test(n)}};d.prototype.isAllpass=function(h,g){if(!h){return true}var i=true,f=this,j=g||{};if(h.size&&h.size()===1&&h.get(0).tagName.toLowerCase()==="form"){h=$(h).find(f.inputTag)}else{if(h.tagName&&h.tagName.toLowerCase()==="form"){h=$(h).find(f.inputTag)}}h.each(function(){if(f.checkInput(this,j)===false){return $(this).focus(),(i=false)}});return i};d.prototype.remind=function(h,i,f){var j="";if(this.isVisible(h)){if(i==="radio"||i==="checkbox"){this.errorPlacement(h,this.getErrMsg(h))}else{if(f==="select"||f==="empty"){this.errorPlacement(h,(f==="empty"&&j)?"您尚未输入"+j:this.getErrMsg(h))}else{if(/^range|number$/i.test(i)&&Number(h.value)){this.errorPlacement(h,"值无效")}else{var g=this.getErrMsg(h);if(j){g="您输入的"+j+"格式不准确"}this.errorPlacement(h,g)}}}}return false};d.prototype.checkInput=function(k,m){var j=this.getElementType(k);var n=k.tagName.toLowerCase();var h=this.hasProp(k,"required");var g=this.hasProp(k,"data-auto-none");if(g||k.disabled||j==="submit"||j==="reset"||j==="file"||j==="image"||!this.isVisible(k)){return}var f=true;if(j==="radio"&&h){var l=k.name?$("input[type='radio'][name='"+k.name+"']"):$(k);var i=false;l.each(function(){if(i===false&&$(this).is("[checked]")){i=true}});if(i===false){f=this.remind(l.get(0),j,n)}else{this.successPlacement(k)}}else{if(j==="checkbox"&&h&&!$(k).is("[checked]")){f=this.remind(k,j,n)}else{if(n==="select"&&h&&!k.value){f=this.remind(k,j,n)}else{if((h&&this.isEmpty(k))||!(f=this.isRegex(k))){f?this.remind(k,j,"empty"):this.remind(k,j,n);f=false}else{this.successPlacement(k)}}}}return f};d.prototype.getErrMsg=function(f){return f.getAttribute("title")||""};d.prototype.errorPlacement=function(g,f){$(g).addClass("validate-error"),this.insertErrorEle(g);$($(g).data("input-info")).addClass("fadeInRight animated").css({width:"auto"}).html(f)};d.prototype.successPlacement=function(f){$(f).removeClass("validate-error"),this.insertErrorEle(f);$($(f).data("input-info")).removeClass("fadeInRight").css({width:"30px"}).html("")};d.prototype.insertErrorEle=function(g){var f=$('<span style="-webkit-animation-duration:.2s;animation-duration:.2s;padding-right:20px;color:#a94442;position:absolute;right:0;font-size:12px;z-index:2;display:block;width:34px;text-align:center;pointer-events:none"></span>');f.css({top:$(g).position().top+"px",paddingTop:$(g).css("paddingTop"),paddingBottom:$(g).css("paddingBottom"),lineHeight:$(g).css("height")});$(g).data("input-info")||$(g).data("input-info",f.insertAfter(g))};d.prototype.check=function(h,j,g){var i=$.extend({},g||{}),f=this;$(h).attr("novalidate","novalidate");$(h).find(f.inputTag).map(function(){var l=function(){f.checkInput(this)};for(var k in f.checkEvent){if(f.checkEvent[k]===true){$(this).off(k,l).on(k,l)}}});$(h).bind("submit",function(k){if(f.isAllpass($(this).find(f.inputTag),i)&&typeof j==="function"){j.call(this,$(h).serialize())}return k.preventDefault(),false});return $(h).data("validate",this)};$.fn.validate=function(g,f){return(new d()).check(this,g,f)};$.validate=function(g,h,f){return(new d()).check(g,h,f)};
/*! 自动监听规则内表单 */
;$.validate.listen=function(){$("form[data-auto]").map(function(){if($(this).attr("data-listen")!=="true"){var f=$(this).attr("data-callback");$(this).attr("data-listen","true").validate(function(g){$.form.load(this.getAttribute("action")||window.location.href,g,this.getAttribute("method")||"POST",window[f||"_default_callback"]||undefined,true,this.getAttribute("data-tips")||undefined,this.getAttribute("data-time")||undefined)});$(this).find("[data-form-loaded]").map(function(){$(this).html(this.getAttribute("data-form-loaded")||this.innerHTML);$(this).removeAttr("data-form-loaded").removeClass("layui-disabled")})}})};var c=function(){this.version="1.0"};
/*! 计算URL地址中有效的URI */
;c.prototype.getUri=function(f){f=f||window.location.href;f=(f.indexOf(window.location.host)!==-1?f.split(window.location.host)[1]:f).split("?")[0];return(f.indexOf("#")!==-1?f.split("#")[1]:f)};
/*! 通过URI查询最有可能的菜单NODE */
;c.prototype.queryNode=function(f){var g=$('[data-menu-node][data-open*="_URL_"]'.replace("_URL_",f.replace(/\.html$/ig,"")));if(g.size()){return g.get(0).getAttribute("data-menu-node")}return/^m\-/.test(node=location.href.replace(/.*spm=([\d\-m]+).*/ig,"$1"))?node:""};
/*!　URL转URI */
;c.prototype.parseUri=function(f,j){var h={};if(f.indexOf("?")!==-1){var o=f.split("?")[1].split("&");for(var l in o){if(o[l].indexOf("=")!==-1){var k=o[l].split("=");try{h[k[0]]=window.decodeURIComponent(window.decodeURIComponent(k[1].replace(/%2B/ig," ")))}catch(m){console.log([m,f,o,k])}}}}f=this.getUri(f);h.spm=j&&j.getAttribute("data-menu-node")||this.queryNode(f);if(!h.token){var g=window.location.href.replace(/.*token=(\w+).*/ig,"$1");(/^\w{16}$/.test(g))&&(h.token=g)}delete h[""];var n="?"+$.param(h);return f+(n!=="?"?n:"")};
/*! 后台菜单动作初始化 */
;c.prototype.listen=function(){
/*! 左侧菜单状态切换 */
;$("ul.sidebar-trans .nav-item a").on("click",function(){$(this).parents(".sidebar-nav.main-nav").addClass("open").find("ul.sidebar-trans").show();$(".sidebar-trans .nav-item").not($(this).parent().addClass("active")).removeClass("active")});$("body").on("click",".framework-sidebar-full .sidebar-title",function(){var i=$(this).next("ul.sidebar-trans"),j=i.attr("data-menu-node")||false;j&&$.cookie(j,$(this).parent().toggleClass("open").hasClass("open")?2:1);$(this).parent().hasClass("open")?i.show():i.hide()});$("ul.sidebar-trans").map(function(){var i=this.getAttribute("data-menu-node")||false;i&&(parseInt($.cookie(i)||2)===2)&&$(this).show().parent().addClass("open")});
/*! Mini 菜单模式 Tips 显示*/
;$("body").on("mouseenter mouseleave",".framework-sidebar-mini .sidebar-trans .nav-item,.framework-sidebar-mini .sidebar-title",function(i){$(this).tooltip({template:'<div class="console-sidebar-tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:$(this).text(),placement:"right",container:"body"}).tooltip("show"),(i.type==="mouseleave")&&$(this).tooltip("destroy")});
/*! 切换左侧菜单 */
;var h=$("[data-menu-target]").on("click",function(){h.not($(this).addClass("active")).removeClass("active");var j=$(this).attr("data-menu-target");var i=$("[data-menu-box="+j+"]").removeClass("hide");$("[data-menu-box]").not(i).addClass("hide");i.find("[data-open]:first").trigger("click")});
/*! 左侧菜单样式切换 */
;var g=$(".sidebar-fold").on("click",function(){var i=$(".framework-body").toggleClass("framework-sidebar-mini framework-sidebar-full");$.cookie("menu-style",i.hasClass("framework-sidebar-mini")?"mini":"full")});($.cookie("menu-style")!=="mini")&&g.trigger("click");var g=$(".sidebar-fold-xs").on("click",function(){var i=$(".framework-body").toggleClass("framework-sidebar-h5 framework-sidebar-mini");$.cookie("menu-style",i.hasClass("framework-sidebar-h5")?"h5":"full")});($.cookie("menu-style")!=="full")&&g.trigger("click");var f=$(".t-button").on("click",function(){$(this).toggleClass("active closed");$(".h5-menu").toggleClass("closed active")});$(".h5-menu li").on("click",function(){f.trigger("click")});
/*! URI路由处理 */
;window.onhashchange=function(){var l=(window.location.hash||"").substring(1),k=l.replace(/.*spm=([\d\-m]+).*/ig,"$1");if(!/^m\-[\d\-]+$/.test(k)){k=$.menu.queryNode($.menu.getUri())||""}if(l.length<1||k.length<1){return $(".topbar-home-link:first").trigger("click")}var i=[k.split("-")[0],k.split("-")[1]].join("-");$("[data-menu-target]").not($('[data-menu-target="'+i+'"]').addClass("active")).removeClass("active");var j=$('[data-menu-node="'+k+'"]').eq(0);if(j.size()>0){$(".framework-container").addClass("framework-sidebar-full");var m=j.parent("li").addClass("active");m.parents(".framework-sidebar").find("li.active").not(m).removeClass("active");j.parents(".sidebar-trans").removeClass("hide").show();j.parents(".main-nav").addClass("open");j.parents("[data-menu-box]").removeClass("hide").siblings("[data-menu-box]").addClass("hide")}else{$(".framework-container").removeClass("framework-sidebar-full")}$.form.open(l)};window.onhashchange.call(this)};
/*! 实例并加载到jQ对象上 */
;$.menu=new c()});